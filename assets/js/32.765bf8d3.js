(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{420:function(s,t,a){"use strict";a.r(t);var n=a(52),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-使用"}},[s._v("#")]),s._v(" Webpack 使用")]),s._v(" "),a("h2",{attrs:{id:"入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[s._v("#")]),s._v(" 入门")]),s._v(" "),a("p",[a("strong",[s._v("webpack 需求")])]),s._v(" "),a("ul",[a("li",[s._v("开发过程中，代码保存自动刷新页面就好了 -热更新")]),s._v(" "),a("li",[s._v("写css样式，或者js代码后自动处理兼容问题 -代码编译")]),s._v(" "),a("li",[s._v("项目上线，一键压缩代码，图片处理 -压缩打包服务")])]),s._v(" "),a("p",[s._v("代码转换、文件优化、代码分割、模块合并、自动刷新、代码校验、自动发布。")]),s._v(" "),a("p",[s._v("webpack本质上是一个javascript应用程序的静态模块打包器。")]),s._v(" "),a("blockquote",[a("p",[s._v("什么是模块")])]),s._v(" "),a("ul",[a("li",[s._v("ES2015的import语句")]),s._v(" "),a("li",[s._v("CommonJs require语句")]),s._v(" "),a("li",[s._v("AMD define和require语句")]),s._v(" "),a("li",[s._v("Css/Scss/Less文件中的import")]),s._v(" "),a("li",[s._v("样式或html文件的图片、字体文件\n"),a("strong",[s._v("安装")])])]),s._v(" "),a("p",[s._v("npm install webpack webpack-cli --save-dev")]),s._v(" "),a("ul",[a("li",[s._v("nrm ls 查看有哪些源可以使用（nrm需要安装）")]),s._v(" "),a("li",[s._v("nrm use taobao 切换源")]),s._v(" "),a("li",[s._v("nrm test taobao 测速")]),s._v(" "),a("li",[s._v("如安装失败，推荐切换成国内镜像")])]),s._v(" "),a("h3",{attrs:{id:"打包js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包js"}},[s._v("#")]),s._v(" 打包js")]),s._v(" "),a("blockquote",[a("p",[s._v("步骤")])]),s._v(" "),a("ul",[a("li",[s._v("新建一个项目，然后npm init -y")]),s._v(" "),a("li",[s._v("新建一个js，写一些代码")]),s._v(" "),a("li",[s._v("在命令行直接 npx webpack ...js 打包完成")])]),s._v(" "),a("p",[s._v("如果想自己配置一下webpack，就新建一个webpack.config.js")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//基本配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//入口")]),s._v("\n\tentry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//出口")]),s._v("\n\toutput"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tfilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\tpath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("然后 npx webpack --config webpack.config.js 指定配置文件。")]),s._v(" "),a("p",[s._v("注意，一般把文件放到src目录下，在package.json里配置命令，比如：“build”：webpack。这样直接 npm run build就可以打包。")]),s._v(" "),a("h3",{attrs:{id:"打包图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包图片"}},[s._v("#")]),s._v(" 打包图片")]),s._v(" "),a("ul",[a("li",[s._v("下载 npm install file-loader --save-dev")]),s._v(" "),a("li",[s._v("配置文件 在webpack.config.js中加模块")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\trules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\ttest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(jpg|png|gif)$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\tuse"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\tloader"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file-loader"')]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p"),s._v(" "),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("常用配置")]),s._v(" "),a("ul",[a("li",[s._v("css-loader less-loader 处理css、less")]),s._v(" "),a("li",[s._v("file-loader url-loader 处理图片")]),s._v(" "),a("li",[s._v("style-loader 通过style将css引入到html文件")]),s._v(" "),a("li",[s._v("postcss-loader css加前缀")])]),s._v(" "),a("h3",{attrs:{id:"插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),a("p",[s._v("常用插件")]),s._v(" "),a("ul",[a("li",[s._v("HtmlWebpackPlugin ，生成一个 HTML5 文件\n"),a("ul",[a("li",[s._v("安装 npm install --save-dev html-webpack-plugin")]),s._v(" "),a("li",[s._v("配置")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" HtmlWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" webpackConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./index.html"')]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定模版")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("CleanWebpackPlugin 清除文件，重新生成")])]),s._v(" "),a("h3",{attrs:{id:"热更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[s._v("#")]),s._v(" 热更新")]),s._v(" "),a("p",[s._v("步骤")]),s._v(" "),a("ul",[a("li",[s._v("使用webpack-dev-server作为服务器启动")]),s._v(" "),a("li",[s._v("devServer配置中 hot:true")]),s._v(" "),a("li",[s._v("plugins hotModuleRepalceMentPlugin")]),s._v(" "),a("li",[s._v("js模块中增加module.hot.acceput增加hmr代码")])]),s._v(" "),a("h3",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[s._v("#")]),s._v(" babel")]),s._v(" "),a("p",[s._v("js的编译器，es6+向es5转换")]),s._v(" "),a("p",[s._v("npm install @babel/core @babel/preset-env babel-loader -D")]),s._v(" "),a("p",[a("strong",[s._v("但标准引入的全局变量，部分原生对象，例如，新增的原型链上的方法 Promise symbol set。babel是没办法转换的。")])]),s._v(" "),a("p",[s._v("第一种解决方式：用@babel/polyfill来解决，但它也有问题，比如开发类库，UI组件时，会全局变量的污染。")]),s._v(" "),a("p",[s._v("第二种解决方式：用@babel/plugin-transform-runtime @babel/runtime-corejs3,以闭包方式注入，保证全局环境不被污染。")]),s._v(" "),a("h3",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),a("blockquote",[a("p",[s._v("webpack 4入门 步骤")])]),s._v(" "),a("ul",[a("li",[s._v("npm init -y")]),s._v(" "),a("li",[s._v("npm install webpack --save-dev")]),s._v(" "),a("li",[s._v("npm install webpack-cli --save-dev")]),s._v(" "),a("li",[s._v("新建src/index.js,写一些js代码")]),s._v(" "),a("li",[s._v("package.json里配置dev prod")]),s._v(" "),a("li",[s._v("npm install babel-preset-env --save-dev,npm install @babel/preset-env --save-dev")]),s._v(" "),a("li",[s._v("新建.bablerc,配置presets,配置根据babel版本不一样，最好根据官网来配置")]),s._v(" "),a("li",[s._v("npm install babel-loader --save-dev")]),s._v(" "),a("li",[s._v("新建src/a.js 写一下代码，然后在index.js里引入a.js,再配置.bablerc")]),s._v(" "),a("li",[s._v("新建dist/index.html,引入main.js")]),s._v(" "),a("li",[s._v("要用css还是需要新建webpack.config.js，配置")]),s._v(" "),a("li",[s._v("npm install --save-dev css-loader style-loader。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("\t部分代码如下\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//webpack.config.js")]),s._v("\n\tmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//package.json")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --mode production --module-bind js=babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --mode development --module-bind js=babel-loader"')]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//.babelrc")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h2",{attrs:{id:"进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进阶"}},[s._v("#")]),s._v(" 进阶")]),s._v(" "),a("p",[s._v("treeShaking 摇树优化，在webpack4中只要是production，就会自动优化，而在webpack3以前\n需要安装ugligyjsWebpackPlugin,注意源码必须遵循 ES6 的模块规范 (import & export)，如果是 CommonJS 规范 (require) 则无法使用。")]),s._v(" "),a("h3",{attrs:{id:"生产环境和开发环境不同配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境和开发环境不同配置"}},[s._v("#")]),s._v(" 生产环境和开发环境不同配置")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("开发环境")]),s._v(" "),a("th",[s._v("生产环境")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("devServer")]),s._v(" "),a("td",[s._v("treeShaking")])]),s._v(" "),a("tr",[a("td",[s._v("sourceMap")]),s._v(" "),a("td",[s._v("代码压缩")])]),s._v(" "),a("tr",[a("td",[s._v("接口代理 proxy")]),s._v(" "),a("td",[s._v("提供公共代码")])])])]),s._v(" "),a("p",[s._v("一般用三个配置文件，webpack.prod.js,webpack.dev.js,webpack.base.js分别代表生产，开发，公用的代码，然后\n借助一个工具 webpack.merge把文件合并。")]),s._v(" "),a("p",[a("strong",[s._v("步骤：")])]),s._v(" "),a("ul",[a("li",[s._v("安装 npm install webpack.merge")]),s._v(" "),a("li",[s._v('在配置文件中引入 const merge=require("webpack-merge")')]),s._v(" "),a("li",[s._v("导出时用merge合并一下，module.export=merge(baseConfig,devConfig) , baseConfig和devConfig是引入的配置文件")]),s._v(" "),a("li",[s._v('在package.json中，更改启动文件，例如 "build":"webpack --config ./webpack.dev.js"')])]),s._v(" "),a("h3",{attrs:{id:"打包优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包优化"}},[s._v("#")]),s._v(" 打包优化")]),s._v(" "),a("p",[s._v("三种方式：")]),s._v(" "),a("ul",[a("li",[s._v("入口配置：entry多入口 webpack.ProviePlugin")]),s._v(" "),a("li",[s._v("抽取公共代码 splitchunksPlugins")]),s._v(" "),a("li",[s._v("动态加载：按需加载，懒加载，@babel/plugin-syntax-dynamic-import")])]),s._v(" "),a("p",[s._v("一般都是加载第三方库时，例如jquery。")]),s._v(" "),a("h3",{attrs:{id:"其他介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他介绍"}},[s._v("#")]),s._v(" 其他介绍")]),s._v(" "),a("ul",[a("li",[s._v("css代码分割 mini-css-extract-plugin")]),s._v(" "),a("li",[s._v("css压缩 optimize-css-assets-webpack-plugin")]),s._v(" "),a("li",[s._v("js压缩 terser-webpack-plugin")]),s._v(" "),a("li",[s._v("代码包分析工具 webpack-bundle-analyzer")])]),s._v(" "),a("h3",{attrs:{id:"使用优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用优化"}},[s._v("#")]),s._v(" 使用优化")]),s._v(" "),a("ul",[a("li",[s._v("使用别名 resolve")]),s._v(" "),a("li",[s._v("忽略对已知模块解析 module noParse")]),s._v(" "),a("li",[s._v("将模块暴露到全局 expose-loader、providePlugin")]),s._v(" "),a("li",[s._v("提取公共代码 CommonsChunkPlugin")]),s._v(" "),a("li",[s._v("配置全局开关 DefinePlugin")]),s._v(" "),a("li",[s._v("单独打包css ExtractTextPlugin")])]),s._v(" "),a("h2",{attrs:{id:"实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),a("h3",{attrs:{id:"构建spa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建spa"}},[s._v("#")]),s._v(" 构建SPA")]),s._v(" "),a("p",[s._v("步骤")]),s._v(" "),a("ul",[a("li",[s._v("核心功能")]),s._v(" "),a("li",[s._v("编译依赖")]),s._v(" "),a("li",[s._v("动态更新")]),s._v(" "),a("li",[s._v("Tree shaking")]),s._v(" "),a("li",[s._v("提取css")]),s._v(" "),a("li",[s._v("上线")])]),s._v(" "),a("p",[a("strong",[s._v("操作js步骤")])]),s._v(" "),a("p",[s._v("1.新建一个文件夹spa-webpack，初始化 npm init -y,安装 npm install webpack --save-dev,新建目录src/index.js")]),s._v(" "),a("p",[s._v('2.添加开发环境"dev":"webpack --mode development"，启动 npm run dev (安装cli)')]),s._v(" "),a("p",[s._v("3.在dist\t文件夹新建index.html,引入打包的main.js")]),s._v(" "),a("p",[s._v("4.在src里新建components/sync、async、common,第一步是对js的优化，webpack的tree shaking一般有效，但不能在有函数式作用域，类似loadsh有效果的，需要（webpack-deep-scope-analysis-plugin）插件。或者把类似loadsh的库直接解构完，就不需要其他插件。")]),s._v(" "),a("p",[a("strong",[s._v("操作css步骤")])]),s._v(" "),a("p",[s._v("1.安装npm install --save-dev css-loader")]),s._v(" "),a("p",[s._v("2.配置webpack.config.js")]),s._v(" "),a("p",[s._v("3.npm i purgecss-webpack-plugin -D")]),s._v(" "),a("p",[s._v("4.npm install --save-dev mini-css-extract-plugin,它和style-loader冲突，使用时要把style-loader的删掉。")]),s._v(" "),a("p",[a("strong",[s._v("部分代码")])]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v("//components/index.js\nimport "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(' from "./components/sync/index.js";\nconsole.log("111")\nsync()\n//components/sync/index.js\nimport item from "./sync.css";\nconst sync=function()'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\n\tconsole.log("sync");\n\tdocument.getElementById("app").innerHTML=`<h1 class="$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("item.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("hello</h1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("`\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nconst isarray=function()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\n\tconsole.log("isarray");\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nexport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tsync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tisarray\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n//webpack.config.js\nconst path = require('path');\nconst glob = require('glob');\nconst PurgeCSSPlugin = require('purgecss"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin');\nconst MiniCssExtractPlugin = require('mini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("extract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin');\nconst PATHS = "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" path.join(__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" './dist/"),a("span",{pre:!0,attrs:{class:"token important"}},[s._v("*.html')")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule.exports = "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /\\.css$/i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\t\t// MiniCssExtractPlugin.loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t // "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用MiniCssExtractPlugin时去掉\n\t\t\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t  modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t\t  localIdentName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[name]__[local]-[hash:base64:5]"')]),s._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\t\t\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\tnew MiniCssExtractPlugin()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    //new PurgeCSSPlugin("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("//  paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" glob.sync(`$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("PATHS.src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token important"}},[s._v("**/*`")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    //"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用css tree shaking的时候打开\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("p",[a("strong",[s._v("切换开发、上线环境")])]),s._v(" "),a("p",[s._v("1.新建config/webpack.development.js,webpack.production.js")]),s._v(" "),a("p",[s._v("2.npm install webpack-merge --save-dev")]),s._v(" "),a("p",[s._v("3.配置webpack.config.js")]),s._v(" "),a("p",[s._v("4.npm install html-webpack-plugin --save-dev")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v("const "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v('=require("webpack'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('merge");\nconst argv=require("yargs'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('parser")(process.argv.slice(2));\nconst __mode=argv.mode'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v('"development";\nconst __mergeConfig=require(`./config/webpack.$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("__mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v('.js`)\nconst __modeflag=(__mode=="production"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("false);\nconst HtmlWebpackPlugin = require('html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin')\nwebpackConfig= "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   \t\tnew MiniCssExtractPlugin("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   \t\t\tfilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("__modeflag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v('"styles/'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v('.css"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"styles/[name].css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   \t\t\tchunkFilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("__modeflag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v('"styles/'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v('.css"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"styles/[id].css"')]),s._v("\n   \t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   \t\tnew HtmlWebpackPlugin("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n   \t\t  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   \t\t  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src/index.html'")]),s._v("\n   \t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")\n   \t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n module.exports=merge(__mergeConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("webpackConfig)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"优化单页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化单页"}},[s._v("#")]),s._v(" 优化单页")]),s._v(" "),a("p",[s._v("1.npm install webpack-dev-server --save-dev")]),s._v(" "),a("p",[s._v("2.模拟一个接口")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v("webpackConfig= "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("devServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" function (app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" compiler) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t      app.get('/api/test'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" function (req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t        res.json("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(");\n\t      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(");\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v('\n//sync/index.js\nfetch("/api/test")\n\t.then(response='),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("response.json())\n\t.then(data="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\n\t\tconsole.log("fetch结果"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("data.message)\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("3.使用magic comment")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v("//src/index.js\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("import(/* webpackChunkName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(' "my'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('name" '),a("span",{pre:!0,attrs:{class:"token important"}},[s._v("*/")]),s._v(" './components/async/index.js').then(_="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t_.default.init();\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(');\n//src/components/async/index.js\nimport help from "../common/index.js";\nconst asynctest='),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tinit()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v('\n\t\tconsole.log("async")\n\t'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nexport default asynctest;\n//src/components/common/index.js\nfunction help()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(';\nhelp.version="0.01";\nexport default help;\n//src/components/sync/index.js\nimport help from "../common/index.js";\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("npm run dev 单独打包async的js")]),s._v(" "),a("li",[s._v("配置webpack的runtimeChunk和splitChunks")])]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("optimization")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("splitChunks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cacheGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("commons")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'commons'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("chunks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'initial'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("minChunks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t  maxInitialRequests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t  minSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runtimeChunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'runtime'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"构建多页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建多页"}},[s._v("#")]),s._v(" 构建多页")]),s._v(" "),a("p",[s._v("1.npm install -g @nestjs/cli")]),s._v(" "),a("p",[s._v("2.nest new project (cd project ->npm install)")]),s._v(" "),a("p",[s._v("3.npm install swig --save")]),s._v(" "),a("p",[s._v("4.(未完待续)")]),s._v(" "),a("h3",{attrs:{id:"webpack优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack优化"}},[s._v("#")]),s._v(" webpack优化")]),s._v(" "),a("p",[a("strong",[s._v("开发环境")])]),s._v(" "),a("ul",[a("li",[s._v("开启多核压缩")]),s._v(" "),a("li",[s._v("监控面板")]),s._v(" "),a("li",[s._v("开启通知面板")]),s._v(" "),a("li",[s._v("开启打包进度")]),s._v(" "),a("li",[s._v("开发面板更清晰")]),s._v(" "),a("li",[s._v("开启窗口的标题")]),s._v(" "),a("li",[s._v("窗口打印更直接")])]),s._v(" "),a("p",[a("strong",[s._v("上线环境")])]),s._v(" "),a("ul",[a("li",[s._v("es6 不需要编译")]),s._v(" "),a("li",[s._v("前端缓存小负载")]),s._v(" "),a("li",[s._v("真正的loading")]),s._v(" "),a("li",[s._v("多页转单页 性能 请求的数量")]),s._v(" "),a("li",[s._v("分析打包结果")]),s._v(" "),a("li",[s._v("压缩js css")])]),s._v(" "),a("h3",{attrs:{id:"官网链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官网链接"}},[s._v("#")]),s._v(" 官网链接")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);